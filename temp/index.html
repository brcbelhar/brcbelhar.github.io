<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Data Management Portal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://script.google.com">
    <link rel="preconnect" href="https://script.googleusercontent.com">
</head>
<body>

<div class="form-card">
    <h2>BRC BELHAR / Teacher Data Management Portal</h2>

    <!-- Button Row -->
    <div class="button-row">
        <button type="button" class="mode-btn" data-mode="aadhaar">Aadhaar to All</button>
        <button type="button" class="mode-btn" data-mode="udise">UDISE to PAN</button>
        <button type="button" class="mode-btn" data-mode="name">Name to PAN</button>
        <button type="button" class="mode-btn" data-mode="add">Add New</button>
    </div>

    <!-- Aadhaar Search Section -->
    <div id="aadhaarSection" class="search-section hidden">
        <div class="search-box">
            <label>Enter Adhaar to edit all data:</label>
            <div class="search-controls">
                <input type="text" id="searchAdhaar" placeholder="12 Digit Adhaar Number" inputmode="numeric" maxlength="12">
                <button type="button" onclick="searchData()">Find Record</button>
            </div>
            <div id="statusMessage"></div>
        </div>
    </div>

    <!-- UDISE Search Section -->
    <div id="udiseSection" class="search-section hidden">
        <!-- Search by UDISE -->
<div class="search-box">
    <label>Enter last 5 digits of UDISE Code (first six 102328 are fixed):</label>
    <div class="search-controls">
        <input type="text" id="searchUdise" placeholder="Last 5 digits" maxlength="5" inputmode="numeric">
        <button type="button" onclick="searchByUDISE()">Search by UDISE</button>
    </div>
    <div id="udiseResultList" class="result-list"></div>
</div>
    </div>

    <!-- Name Search Section -->
    <div id="nameSection" class="search-section hidden">
        <div class="search-box">
            <label>Enter part of name to list teachers (edit PAN only):</label>
            <div class="search-controls">
                <input type="text" id="searchName" placeholder="Enter part of name">
                <button type="button" onclick="searchByName()">Search by Name</button>
            </div>
            <div id="nameResultList" class="result-list"></div>
        </div>
    </div>

    <!-- Form View (for Add New and Aadhaar edit) -->
    <div id="formView" class="hidden">
        <!-- Back button to return to mode selection -->
        <button type="button" id="backToModeBtn" class="btn-back">‚Üê Back to Modes</button>

        <form id="dataForm">
            <h3>1. Personal Details</h3>
            <div class="grid">
                <div><label>Full Name</label><input type="text" name="name" required></div>
                <div><label>Father's Name</label><input type="text" name="father_name" required></div>
                <div><label>Date of Birth</label><input type="date" name="dob" required></div>
                <div><label>Mobile (10 Digits)</label><input type="text" name="mobile" pattern="^[6-9][0-9]{9}$" maxlength="10" inputmode="numeric" required></div>
                <div><label>Email</label><input type="email" name="email" required></div>
                <div>
                    <label>Gender</label>
                    <div class="radio-group">
                        <label><input type="radio" name="gender" value="Male" required> Male</label>
                        <label><input type="radio" name="gender" value="Female" required> Female</label>
                    </div>
                </div>
            </div>
            <label>Adhaar Number (12 Digits)</label>
            <input type="text" name="adhaar" id="formAdhaar" pattern="^[1-9][0-9]{11}$" maxlength="12" inputmode="numeric" required>

            <label>PAN (10 Characters, e.g., ABCDE1234F)</label>
            <input type="text" name="pan" id="pan" pattern="^[A-Z]{5}[0-9]{4}[A-Z]{1}$" maxlength="10" placeholder="ABCDE1234F" title="Please enter a valid PAN (5 letters, 4 numbers, 1 letter)">

            <h3>2. School & Service Details</h3>
            <label>School Name</label><input type="text" name="school_name" required>
            <div class="grid">
                <div><label>UDISE Code</label><input type="text" name="udise" pattern="^102328[0-9]{5}$" maxlength="11" inputmode="numeric" placeholder="102328*****" required></div>
                <div><label>Date of Joining</label><input type="date" name="doj" required></div>
                <div>
                    <label>Teacher Type</label>
                    <select name="teacher_type" required>
                        <option value="">--Select--</option>
                        <option>Tre</option><option>Niyojit</option><option>Vishisht</option>
                        <option>Niymit</option><option>HT</option><option>HM</option><option>Assistant HM / HT</option>
                    </select>
                </div>
                <div>
                    <label>Class</label>
                    <div class="radio-group">
                        <label><input type="radio" name="class_level" value="1 to 5" required> 1 to 5</label>
                        <label><input type="radio" name="class_level" value="6 to 8" required> 6 to 8</label>
                        <label><input type="radio" name="class_level" value="9 to 10" required> 9 to 10</label>
                        <label><input type="radio" name="class_level" value="11 to 12" required> 11 to 12</label>
                    </div>
                </div>
            </div>
            <label>Subject</label><input type="text" name="subject" required>

            <h3>3. Bank Account Details</h3>
            <div class="grid">
                <div style="grid-column: span 2;">
                    <label>Account Number (Numbers only)</label>
                    <input type="text" name="account_number" inputmode="numeric" required>
                </div>
                <div><label>Bank Name</label><input type="text" name="bank_name" required></div>
                <div><label>IFSC Code</label><input type="text" name="ifsc" placeholder="e.g., SBIN0001234" required></div>
            </div>

            <h3>4. Permanent Address Information</h3>
            <div class="grid">
                <div><label>Village / Town</label><input type="text" name="village" required></div>
                <div><label>Panchayat / Municipality</label><input type="text" name="panchayat" required></div>
                <div><label>Block</label><input type="text" name="block" required></div>
                <div><label>District</label><input type="text" name="district" required></div>
                <div><label>State</label><input type="text" name="state" value="Bihar" required></div>
                <div><label>Pin Code</label><input type="text" name="pincode" pattern="^[1-9][0-9]{5}$" maxlength="6" inputmode="numeric" required></div>
            </div>

            <button type="submit" id="submitBtn">Submit Data Securely</button>
        </form>
    </div>
    
</div>

<!-- Loader -->
<div id="loader" class="loader-overlay">
    <div class="loader"></div>
</div>

<!-- Success Popup (for full form submission) -->
<div id="successPopup" class="popup-overlay">
    <div class="popup-content">
        <h3>Success!</h3>
        <p>Data submitted successfully.</p>
        <button id="closePopupBtn">OK</button>
    </div>
</div>

<!-- PAN Edit Popup -->
<div id="panPopup" class="popup-overlay">
    <div class="popup-content">
        <h3>Update PAN</h3>
        <p style="margin:10px 0;">Enter new PAN for <span id="panTeacherName"></span></p>
        <input type="text" id="panInput" maxlength="10" style="width:100%; margin-bottom:20px;" placeholder="ABCDE1234F">
        <div style="display:flex; gap:10px; justify-content:center;">
            <button id="savePanBtn" style="background:#28a745;">Save</button>
            <button id="cancelPanBtn" style="background:#dc3545;">Cancel</button>
        </div>
    </div>
</div>

<script src="scripts.js"></script>
</body>
</html>
